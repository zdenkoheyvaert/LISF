<!doctype html>
<!--- 
 Written by Shahryar Ahmad
 Contact: shahryarkhalique.ahmad@nasa.gov
-->
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="stylesheet" href="css/leaflet.css">
    <link rel="stylesheet" href="css/qgis2web.css">
    <link rel="stylesheet" href="css/fontawesome-all.min.css">
    <link rel="stylesheet" href="css/leaflet-search.css">
    <!-- <link rel="stylesheet" href="css/styledLayerControl.css" /> -->

    <!-- For sidebar -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
    <link rel="stylesheet" href="https://malihu.github.io/custom-scrollbar/jquery.mCustomScrollbar.min.css">

    <link rel="stylesheet" href="css/sidebar-main.css">
    <link rel="stylesheet" href="css/sidebar-themes.css">


    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->

    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
    // Date slider

    $(function() {
      $( "#slider-range" ).slider({
        range: false,
        min: new Date('2010.01.01').getTime() / 1000,
        max: new Date('2014.01.01').getTime() / 1000,
        step: 86400,
        values: [ new Date('2013.01.01').getTime() / 1000], //, new Date('2013.02.01').getTime() / 1000 ],
        slide: function( event, ui ) {
          $( "#amount" ).val( (new Date(ui.values[ 0 ] *1000).toDateString() )); // + " - " + (new Date(ui.values[ 1 ] *1000)).toDateString() );
        }
      });
      $( "#amount" ).val( (new Date($( "#slider-range" ).slider( "values", 0 )*1000).toDateString()));// +
        //" - " + (new Date($( "#slider-range" ).slider( "values", 1 )*1000)).toDateString());
    });
    </script>
    <title></title>
</head>

<body>

    <div class="page-wrapper legacy-theme sidebar-bg  toggled border-radius-on">



        <!-- SIDEBAR -->
        <nav id="sidebar" class="sidebar-wrapper">
            <div class="sidebar-content">

                <!-- sidebar-menu  -->


                <div class=" sidebar-item sidebar-menu">
                    <span id="outlayercontrol">
                        <!-- <select id='custom-select'>
                            <option>Sherlock Holmes</option>
                            <option>The Great Gatsby</option>
                            <option>V for Vendetta</option>
                            <option>The Wolf of Wallstreet</option>
                            <option>Quantum of Solace</option>
                        </select> -->
                    </span>
                    <ul>


                        <!-- sidebar-brand  -->
                        <div class="sidebar-item sidebar-brand">
                            <a href="#">RASTERS</a>
                        </div>

                        <li class="sidebar-dropdown">
                            <a href="#">
                                <i class="fa fa-satellite"></i>
                                <span class="menu-text">Remote Sensing</span>
                                <!-- <span class="badge badge-pill badge-warning">New</span> -->
                            </a>
                            <div class="sidebar-submenu">
                                <span>
                                    <select class='custom-select select-raster' id='rs_raster'>
                                        <optgroup label="Precipitation">
                                            <option>GPM IMERG</option>
                                        </optgroup>
                                        <optgroup label="Soil Moisture">
                                            <option>SMAP</option>
                                            <option>CYGNSS</option>
                                        </optgroup>
                                        <optgroup label="Terrestrial Water Storage">
                                            <option>GRACE</option>
                                            <option>GRACE-FO</option>
                                        </optgroup>
                                        <optgroup label="Snow Depth">
                                            <option>AMSR2</option>
                                            <option>GAMMA</option>
                                        </optgroup>
                                        <optgroup label="Snow Cover">
                                            <option>MODIS</option>
                                        </optgroup>
                                        <optgroup label="Evapotranspiration">
                                            <option>ECOSTRESS</option>
                                            <option>OpenET</option>
                                            <option>Landsat</option>
                                            <option>MODIS/VIIRS ALEXI</option>
                                        </optgroup>
                                        <optgroup label="Vegetation">
                                            <option>MODIS LAI</option>
                                            <option>SMAP VOD</option>
                                            <option>GEDI</option>
                                        </optgroup>
                                        <optgroup label="Water Level">
                                            <option>Jason</option>
                                            <option>ICESAT-2</option>
                                            <option>DeltaX</option>
                                        </optgroup>
                                        <optgroup label="Water Extent">
                                            <option>MODIS</option>
                                            <option>Landsat</option>
                                            <option>Sentinel</option>
                                        </optgroup>
                                        <optgroup label="Landslides">
                                            <option>...</option>
                                        </optgroup>
                                    </select>
                                </span>
                                <span class="badge badge-pill badge-secondary">?
                                    <span class="tooltiptext" id="tooltiptext">
                                        <b>GPM IMERG Product:</b><br><br>Global Precipitation Measurement (GPM) is an international satellite mission to provide next-generation observations of rain and snow worldwide every three hours. The Integrated Multi-satellitE Retrievals for GPM (IMERG) is the unified algorithm that provides rainfall estimates combining data from all passive-microwave instruments in the GPM Constellation.
                                    </span>
                                </span>


                                <span>
                                    <select class='custom-select select-raster' id='rs_resolution'>
                                        <optgroup label="Resolution">
                                            <option>1 km</option>
                                            <option>5 km</option>
                                            <option>10 km</option>
                                        </optgroup>
                                    </select>
                                </span>

                                <div id='date-selector'>
                                    <label for="rasterdate" id='date-label'>Date:</label>
                                    <input type="date" id="rasterdate" name="rasterdate"/>
                                </div>

                                <span>
                                    <button class="button button-showlayer" onclick="addRS()"><b>+ </b>Add Layer</button>
                                    <!-- <a href="#" class="button-showlayer">Add Layer</a> -->
                                </span>
                            </div>
                        </li>
                        <li class="sidebar-dropdown">
                            <a href="#">
                                <i class="fa fa-tree"></i>
                                <span class="menu-text">Land Surface Model</span>
                                <!-- <span class="badge badge-pill badge-danger">3</span> -->
                            </a>
                            <div class="sidebar-submenu">
                                <span>
                                    <select class='custom-select select-raster' id='ls_model'>
                                        <optgroup label="LIS OL">
                                            <option>NOAH-MP</option>
                                            <!-- <option>NOAH</option> -->
                                    </select>
                                </span>
                                <span class="badge badge-pill badge-secondary">?
                                    <span class="tooltiptext" id="tooltiptext_ls_model">
                                        Learn more
                                    </span>
                                </span>

                                <span>
                                    <select class='custom-select select-raster' id='ls_variable'>
                                            <option>Soil Moisture</option>
                                            <option>Precipitation</option>
                                            <option>SWE</option>
                                    </select>
                                </span>
                                <span class="badge badge-pill badge-secondary">?
                                    <span class="tooltiptext " id="tooltiptext_ls_variable">
                                        SoilMoist_tavg
                                    </span>
                                </span>

                                <span>
                                    <select class='custom-select select-raster' id='ls_resolution'>
                                        <optgroup label="Resolution">
                                            <option>1 km</option>
                                            <option>5 km</option>
                                            <option>10 km</option>
                                        </optgroup>
                                    </select>

                                    <div id='date-selector'>
                                        <label for="rasterdate" id='date-label'>Date:</label>
                                        <input type="date" id="rasterdate" name="rasterdate"/>
                                    </div>

                                </span>

                                <span>
                                    <button class="button button-showlayer" onclick="addLS()"><b>+ </b>Add Layer</button>
                                    <!-- <a href="#" class="button-showlayer">Add Layer</a> -->
                                </span>
                            </div>
                        </li>


                        <li class="sidebar-dropdown">
                            <a href="#">
                                <i class="fa fa-database"></i>
                                <span class="menu-text">Data Assimilation/ML</span>
                            </a>
                            <div class="sidebar-submenu">
                                <span>
                                    <select class='custom-select select-raster' id=''>
                                        <optgroup label="Water Extent">
                                            <option>Fusion (Sentinel1-Landsat)</option>
                                            <option>ML (Sentinel1-MODIS)</option>
                                        </optgroup>
                                    </select>
                                </span>
                                <span class="badge badge-pill badge-secondary">?
                                    <span class="tooltiptext">
                                        Learn more
                                    </span>
                                </span>

                                <span>
                                    <select class='custom-select select-raster' id=''>
                                        <optgroup label="Resolution">
                                            <option>10 m</option>
                                            <option>30 m</option>
                                        </optgroup>
                                    </select>
                                </span>


                                <div id='date-selector'>
                                    <label for="rasterdate" id='date-label'>Date:</label>
                                    <input type="date" id="rasterdate" name="rasterdate"/>
                                </div>

                                <span>
                                    <button class="button button-showlayer"><b>+ </b>Add Layer</button>
                                    <!-- <a href="#" class="button-showlayer">Add Layer</a> -->
                                </span>
                            </div>
                        </li>


                        <li class="sidebar-dropdown">
                            <a href="#">
                                <i class="fa fa-globe"></i>
                                <span class="menu-text">Reanalysis/Forecasts</span>
                            </a>
                            <div class="sidebar-submenu">
                                <span>
                                    <select class='custom-select select-raster' id=''>
                                            <option>MERRA2</option>
                                            <option>GEOS5</option>
                                    </select>
                                </span>
                                <span class="badge badge-pill badge-secondary">?
                                    <span class="tooltiptext">
                                        Learn more
                                    </span>
                                </span>


                                <span>
                                    <select class='custom-select select-raster' id=''>
                                        <optgroup label="Resolution">
                                            <option>10 km</option>
                                            <option>25 km</option>
                                            <option>50 km</option>
                                        </optgroup>
                                    </select>
                                </span>


                                <div id='date-selector'>
                                    <label for="rasterdate" id='date-label'>Date:</label>
                                    <input type="date" id="rasterdate" name="rasterdate"/>
                                </div>

                                <span>
                                    <button class="button button-showlayer"><b>+ </b>Add Layer</button>
                                    <!-- <a href="#" class="button-showlayer">Add Layer</a> -->
                                </span>
                            </div>
                        </li>


                        <!-- sidebar-brand  -->
                        <div class="sidebar-item sidebar-brand">
                            <a href="#">TIMESERIES</a>
                        </div>

                        <li class="sidebar-dropdown">
                            <a href="#">
                                <i class="fa fa-chart-line"></i>
                                <span class="menu-text">Charts</span>
                                <span class="badge badge-pill badge-primary">Beta</span>
                            </a>
                            <div class="sidebar-submenu">
                                <span>
                                    <a href=" javascript:addChart()">
                                        <i class="fa fa-thermometer"></i>
                                        <span class="menu-text" id="select-raster">Temperature</span>
                                    </a>
                                </span>
                            </div>
                        </li>
                        <li>
                            <a href="#">
                                <i class="fa fa-calendar"></i>
                                <span class="menu-text">Statistics</span>
                            </a>

                        </li>


                        <!-- sidebar-brand  -->
                        <div class="sidebar-item sidebar-brand">
                            <a href="storymap.html" target="_blank">CASE STUDIES</a>
                        </div>

                        <div id="slider-range"></div>
                        <p>
                          <label for="amount">Date range:</label>
                          <input type="text" id="amount" style="border: 0; color: #f6931f; font-weight: bold;" size="100"/>
                        </p>

                        <!-- <li class="sidebar-dropdown">
                            <a href="#">
                                <i class="fa fa-water"></i>
                                <span class="menu-text">Floods</span>
                            </a>
                            <div class="sidebar-submenu">
                                <span>
                                    <a href="#">
                                        <i class="fa fa-one"></i>
                                        <span class="menu-text" id="select-raster">Case Study 1</span>
                                    </a>
                                    <a href="#">
                                        <i class="fa fa-one"></i>
                                        <span class="menu-text" id="select-raster">Case Study 2</span>
                                    </a>
                                </span>
                            </div>
                        </li>


                        <li class="sidebar-dropdown">
                            <a href="#">
                                <i class="fa fa-tint"></i>
                                <span class="menu-text">Droughts</span>
                            </a>
                            <div class="sidebar-submenu">
                                <span>
                                    <a href="storymap.html">
                                        <i class="fa fa-one"></i>
                                        <span class="menu-text" id="select-raster">Case Study 1</span>
                                    </a>

                                    <a href="#">
                                        <i class="fa fa-one"></i>
                                        <span class="menu-text" id="select-raster">Case Study 2</span>
                                    </a>
                                </span>
                            </div>
                        </li> -->

                        <!-- sidebar-brand  -->
                        <div class="sidebar-item sidebar-brand">
                            <a href="#">COMPARE</a>
                        </div>

                        <li class="sidebar-dropdown">
                            <a href="#">
                                <i class="fa fa-images"></i>
                                <span class="menu-text">Raster Comparison</span>
                                <!-- <span class="badge badge-pill badge-primary">Beta</span> -->
                            </a>
                            <div class="sidebar-submenu">
                                <span>
                                    <a href="#">
                                        <span class="menu-text" id="select-raster">Variable 1</span>
                                    </a>
                                    <a href="#">
                                        <span class="menu-text" id="select-raster">Variable 2</span>
                                    </a>
                                </span>
                                <span>
                                    <button class="button button-showlayer" onclick="javascript:addComparison();"><b>+ </b>Compare</button>
                                    <!-- <a href="#" class="button-showlayer">Add Layer</a> -->
                                </span>
                            </div>
                        </li>



                    </ul>
                </div>
                <!-- sidebar-menu  -->
            </div>


            <!-- sidebar-footer  -->
            <div class="sidebar-footer">
                <div class="dropdown">

                    <a href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fa fa-bell"></i>
                        <span class="badge badge-pill badge-warning notification">3</span>
                    </a>
                    <div class="dropdown-menu notifications" aria-labelledby="dropdownMenuMessage">
                        <div class="notifications-header">
                            <i class="fa fa-bell"></i>
                            Notifications
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">
                            <div class="notification-content">
                                <div class="icon">
                                    <i class="fas fa-check text-success border border-success"></i>
                                </div>
                                <div class="content">
                                    <div class="notification-detail">Lorem ipsum dolor sit amet consectetur adipisicing
                                        elit. In totam explicabo</div>
                                    <div class="notification-time">
                                        6 minutes ago
                                    </div>
                                </div>
                            </div>
                        </a>
                        <a class="dropdown-item" href="#">
                            <div class="notification-content">
                                <div class="icon">
                                    <i class="fas fa-exclamation text-info border border-info"></i>
                                </div>
                                <div class="content">
                                    <div class="notification-detail">Lorem ipsum dolor sit amet consectetur adipisicing
                                        elit. In totam explicabo</div>
                                    <div class="notification-time">
                                        Today
                                    </div>
                                </div>
                            </div>
                        </a>
                        <a class="dropdown-item" href="#">
                            <div class="notification-content">
                                <div class="icon">
                                    <i class="fas fa-exclamation-triangle text-warning border border-warning"></i>
                                </div>
                                <div class="content">
                                    <div class="notification-detail">Lorem ipsum dolor sit amet consectetur adipisicing
                                        elit. In totam explicabo</div>
                                    <div class="notification-time">
                                        Yesterday
                                    </div>
                                </div>
                            </div>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item text-center" href="#">View all notifications</a>
                    </div>
                </div>
                <div class="dropdown">
                    <a href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fa fa-envelope"></i>
                        <span class="badge badge-pill badge-success notification">7</span>
                    </a>
                    <div class="dropdown-menu messages" aria-labelledby="dropdownMenuMessage">
                        <div class="messages-header">
                            <i class="fa fa-envelope"></i>
                            Messages
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">
                            <div class="message-content">
                                <div class="pic">
                                    <img src="img/user.jpg" alt="">
                                </div>
                                <div class="content">
                                    <div class="message-title">
                                        <strong> Jhon doe</strong>
                                    </div>
                                    <div class="message-detail">Lorem ipsum dolor sit amet consectetur adipisicing
                                        elit. In totam explicabo</div>
                                </div>
                            </div>

                        </a>
                        <a class="dropdown-item" href="#">
                            <div class="message-content">
                                <div class="pic">
                                    <img src="img/user.jpg" alt="">
                                </div>
                                <div class="content">
                                    <div class="message-title">
                                        <strong> Jhon doe</strong>
                                    </div>
                                    <div class="message-detail">Lorem ipsum dolor sit amet consectetur adipisicing
                                        elit. In totam explicabo</div>
                                </div>
                            </div>

                        </a>
                        <a class="dropdown-item" href="#">
                            <div class="message-content">
                                <div class="pic">
                                    <img src="img/user.jpg" alt="">
                                </div>
                                <div class="content">
                                    <div class="message-title">
                                        <strong> Jhon doe</strong>
                                    </div>
                                    <div class="message-detail">Lorem ipsum dolor sit amet consectetur adipisicing
                                        elit. In totam explicabo</div>
                                </div>
                            </div>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item text-center" href="#">View all messages</a>

                    </div>
                </div>
                <div class="dropdown">
                    <a href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fa fa-cog"></i>
                        <span class="badge-sonar"></span>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuMessage">
                        <a class="dropdown-item" href="#">My profile</a>
                        <a class="dropdown-item" href="#">Help</a>
                        <a class="dropdown-item" href="#">Settings</a>
                    </div>
                </div>
                <div>
                    <a href="#">
                        <i class="fa fa-power-off"></i>
                    </a>
                </div>
                <div class="pinned-footer">
                    <a href="#">
                        <i class="fas fa-ellipsis-h"></i>
                    </a>
                </div>
            </div>
        </nav>




        <!-- Map content on main page -->
        <!-- <main class="page-content pt-2"> -->
        <div id="map-container">
            <!-- For Charts -->
            <div id="chart-container">
              <iframe src="http://depts.washington.edu/saswe/columbia/temperature_reservoir.html?grandid=60&name=Bumping%20Lake" width="730" height="420" frameborder="0" scrolling="0" overflow="hidden">
              </iframe>
            </div>

            <!-- Main map -->
            <div id="map">
            </div>


        </div>
        <!-- </main> -->



    </div>
    <!-- page-wrapper -->


    <script src="js/qgis2web_expressions.js"></script>
    <script src="js/leaflet.js"></script>
    <script src="js/multi-style-layer.js"></script>
    <script src="js/leaflet.rotatedMarker.js"></script>
    <script src="js/leaflet.pattern.js"></script>
    <script src="js/leaflet-hash.js"></script>
    <script src="js/Autolinker.min.js"></script>
    <script src="js/rbush.min.js"></script>
    <script src="js/labelgun.min.js"></script>
    <script src="js/labels.js"></script>
    <script src="js/leaflet-search.js"></script>
    <script src="data/MissRiverBasin0.js"></script>

    <!-- <script src="js/styledLayerControl.js"></script> -->
    <script src="https://unpkg.com/esri-leaflet@2.1.1/dist/esri-leaflet.js"></script>
    <script src="js/L.Control.HtmlLegend.js"></script>
    <!-- for raster vis -->
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://npmcdn.com/geotiff@0.3.6/dist/geotiff.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/2.1.0/chroma.min.js"></script>
    <script src="js/leaflet.canvaslayer.field.js"></script>
    <script src="js/leaflet-side-by-side.js"></script>

    <script>
        var highlightLayer;

        function highlightFeature(e) {
            highlightLayer = e.target;

            if (e.target.feature.geometry.type === 'LineString') {
                highlightLayer.setStyle({
                    color: '#ffff00',
                });
            } else {
                highlightLayer.setStyle({
                    fillColor: '#ffff00',
                    fillOpacity: 1
                });
            }

            // highlightLayer.openPopup();
        }
        var map = L.map('map', {
            zoomControl: false
        }).fitBounds([
            [26.4186734618, -114.481892907],
            [47.9971685679, -69.8194993952]
        ]);
        map.setZoom(4);



        var hash = new L.Hash(map);
        // map.attributionControl.setPrefix('<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a> &middot; <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> &middot; <a href="https://qgis.org">QGIS</a>');
        var autolinker = new Autolinker({
            truncate: {
                length: 30,
                location: 'smart'
            }
        });
        var bounds_group = new L.featureGroup([]);

        function setBounds() {}


        function style_MissRiverBasin0_0() {
            return {
                pane: 'pane_MissRiverBasin0',
                opacity: 1,
                color: 'rgba(36,151,227,1.0)',
                dashArray: '',
                lineCap: 'square',
                lineJoin: 'bevel',
                weight: 4.0,
                fillOpacity: 0,
            }
        }
        map.createPane('pane_MissRiverBasin0');
        map.getPane('pane_MissRiverBasin0').style.zIndex = 400;
        map.getPane('pane_MissRiverBasin0').style['mix-blend-mode'] = 'normal';
        var layer_MissRiverBasin0 = new L.geoJson(json_MissRiverBasin0, {
            attribution: '<a href=""></a>',
            pane: 'pane_MissRiverBasin0',
            style: style_MissRiverBasin0_0,
        });

        bounds_group.addLayer(layer_MissRiverBasin0);
        map.addLayer(layer_MissRiverBasin0);
        setBounds();


        // Base Layers  //////////////////////////
        var basemapDark = L.esri.basemapLayer('DarkGray');
        basemapDark.addTo(map);

        var basemapTopo = L.esri.basemapLayer('Topographic');

        var basemapTerrain = L.esri.basemapLayer('Terrain');


        var basemapStreet = L.esri.basemapLayer('Streets');
        var basemap2 = L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'Tiles &copy; Esri &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS',
            maxZoom: 13
        });


        var Stamen_Terrain = L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}{r}.{ext}', {
            attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
            subdomains: 'abcd',
            minZoom: 0,
            maxZoom: 18,
            ext: 'png'
        });

        var Esri_WorldImagery = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
        });

        var Esri_NatGeoWorldMap = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'Tiles &copy; Esri &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC',
            maxZoom: 16
        });
        var Thunderforest_Landscape = L.tileLayer('https://{s}.tile.thunderforest.com/landscape/{z}/{x}/{y}.png?apikey=33cde94253dc46b0a4945dd1b82ec5c6', {
            attribution: '&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
            apikey: '<your apikey>',
            maxZoom: 22
        });



        var baseLayers = {
            "Dark":basemapDark,
            "Satellite":Esri_WorldImagery,
            "Terrain": basemapTerrain,
            "Topographic": basemapTopo
        };


        // L.control.layers({}, {
        //     '<img src="legend/MissRiverBasin0.png" id="leg" width="13"/> Mississippi Basin': layer_MissRiverBasin0,
        // }, {
        //     position: 'topright',
        //     collapsed: false
        // }).addTo(map);


        setBounds();

        L.control.layers(baseLayers, {
            '<img src="legend/MissRiverBasin0.png" id="leg" width="13"/> Mississippi Basin': layer_MissRiverBasin0,
        }, {
            position: "topright"
        }).addTo(map);



        var scale = L.control.scale({
            position: 'bottomright'
        }).addTo(map);
        L.control.zoom({
            position: 'bottomright',
            minZoom: 3,
            maxZoom: 21
        }).addTo(map);


        // Initialize legend for RS data
        var controlRS =  L.control.layers({},{},{
            position: "topleft",
            collapsed: false
        });
        controlRS.addTo(map);

        var legend = L.control({position: 'bottomleft'});




        ///////////////////////////////////// ADDITIONAL FUNCTIONALITIES ///////////////////////


        // Add/remove compare dataset option
        // function fireRS(checkboxElem) {
        //     console.log('fired');
        //     if (checkboxElem.checked) {
        //         addRS();
        //
        //     } else {
        //         removeRS();
        //     }
        // }



        // I. Raster vis //////////////////////////////////////
        // map.removeControl(legendRS);

        function addRS() {
            controlRS.addTo(map);

            var rs_raster = document.getElementById("rs_raster");
            var rs_resolution = document.getElementById("rs_resolution")

            var rs_raster_text = rs_raster.options[rs_raster.selectedIndex].text
            console.log('Selected RS data: '+rs_raster_text);



            if (rs_raster_text == 'ECOSTRESS'){
                document.getElementById("tooltiptext").innerHTML = "Info about ECOSTRESS";

                // var imageUrl = './Datasets/test/eco2.png'
                // imageBounds = [[32.5043572, -109.4463811], [37.7457668,-103.7475784]]; // [[ymin, xmin][ymax, xmax]]
                var imageUrl = './Datasets/test/et_20180805.png'
                imageBounds = [[31.0741952, -95.6387760], [36.0086183,-89.5704962]]; // [[ymin, xmin][ymax, xmax]]

                var olayer = L.imageOverlay(imageUrl, imageBounds)
                olayer.addTo(map);
                olayer.bringToFront()

                controlRS.addOverlay(olayer,'ECO3ETPTJPL')

                // Legend////////
                legend.onAdd = function (map) {

                    var div = L.DomUtil.create('div', 'info legend');
                    div.innerHTML += '<img src="images/ET_legend.png" width="300" /><br>';
                    return div;
                };

                legend.addTo(map);

            }


            else if (rs_raster_text == 'GPM IMERG'){
                document.getElementById("tooltiptext").innerHTML = "<b>GPM IMERG Product:</b><br><br>Global Precipitation Measurement (GPM) is an international satellite mission to provide next-generation observations of rain and snow worldwide every three hours. The Integrated Multi-satellitE Retrievals for GPM (IMERG) is the unified algorithm that provides rainfall estimates combining data from all passive-microwave instruments in the GPM Constellation.";
                imageBounds = [[29.4000000, -113.6500000], [49.0500000, -83.9000000]];
                var imageUrl = './Datasets/test/CHIRPS_DAILY_precipitation_color.png'

                var player = L.imageOverlay(imageUrl, imageBounds)
                player.addTo(map);
                player.bringToFront()

                controlRS.addOverlay(player,'GPM IMERG')

                // Legend////////
                legend.onAdd = function (map) {

                    var div = L.DomUtil.create('div', 'info legend');
                    div.innerHTML += '<img src="images/Precip_legend.png" width="300" /><br>';
                    return div;
                };

                legend.addTo(map);



            }
        }


        // II. LSM vis //////////////////////////////////////

        function addLS() {
            controlRS.addTo(map);

            var ls_model = document.getElementById("ls_model");
            var ls_variable = document.getElementById("ls_variable")
            var ls_resolution = document.getElementById("ls_resolution")

            var ls_model_text = ls_model.options[ls_model.selectedIndex].text
            var ls_variable_text = ls_variable.options[ls_variable.selectedIndex].text
            console.log('Selected LS data: '+ls_model_text);



            if (ls_model_text == 'NOAH-MP'){
                if (ls_variable_text == 'Soil Moisture'){
                    document.getElementById("tooltiptext_ls_model").innerHTML = "LIS (Noah-MP) output at 0.01-deg resolution in 2020 for the EIS Freshwater Project. <br>POC: Shugong Wang, shugong.wang@nasa.gov"
                    document.getElementById("tooltiptext_ls_variable").innerHTML = "SoilMoist_tavg"

                    // var imageUrl = './Datasets/test/eco2.png'

                    var imageUrl = './Datasets/SoilMoist_tavg/SoilMoist_tavg_202001120000.png'
                    imageBounds = [[28.935, -113.925], [49.735,-77.845]]; // [[ymin, xmin][ymax, xmax]]

                    var olayer = L.imageOverlay(imageUrl, imageBounds)
                    olayer.addTo(map);
                    olayer.bringToFront()

                    controlRS.addOverlay(olayer,'Soil Moisture (NOAH-MP)')

                    // Legend////////
                    legend.onAdd = function (map) {

                        var div = L.DomUtil.create('div', 'info legend');
                        div.innerHTML += '<img src="images/SM_legend.png" width="300" /><br>';
                        return div;
                    };

                    legend.addTo(map);

                }

                else if (ls_variable_text == 'Precipitation'){
                    document.getElementById("tooltiptext_ls_model").innerHTML = "LIS (Noah-MP) output at 0.01-deg resolution in 2020 for the EIS Freshwater Project. <br>POC: Shugong Wang, shugong.wang@nasa.gov"
                    document.getElementById("tooltiptext_ls_variable").innerHTML = "TotalPrecip_tavg"


                    var datesel = $('#amount').text();
                    console.log(datesel);
                    // var imageUrl = './Datasets/test/eco2.png'
                    // imageBounds = [[32.5043572, -109.4463811], [37.7457668,-103.7475784]]; // [[ymin, xmin][ymax, xmax]]
                    var imageUrl = './Datasets/precip_NOAHMP/TotalPrecip_tavg_202001010000.png'
                    imageBounds = [[28.935, -113.925], [49.735,-77.845]]; // [[ymin, xmin][ymax, xmax]]

                    var olayer = L.imageOverlay(imageUrl, imageBounds)
                    olayer.addTo(map);
                    olayer.bringToFront()

                    controlRS.addOverlay(olayer,'Precipitation (NOAH-MP)')

                    // Legend////////
                    legend.onAdd = function (map) {

                        var div = L.DomUtil.create('div', 'info legend');
                        div.innerHTML += '<img src="images/Precip_legend.png" width="300" /><br>';
                        return div;
                    };

                    legend.addTo(map);

                }
            }
        }


        // Chart Vision

        function addChart(){
          var chart_cont = document.getElementById("chart-container");
          if (chart_cont.style.display === "none") {
            chart_cont.style.display = "block";
          } else {
            chart_cont.style.display = "none";
          }

        }

        // Comparison

        function addComparison(){
            imageBounds = [[29.4000000, -113.6500000], [49.0500000, -83.9000000]];
            var imageUrl = './Datasets/test/CHIRPS_DAILY_precipitation_color.png'

            var player = L.imageOverlay(imageUrl, imageBounds)


            var imageUrl = './Datasets/test/et_20180805.png'
            imageBounds = [[31.0741952, -95.6387760], [36.0086183,-89.5704962]]; // [[ymin, xmin][ymax, xmax]]

            var olayer = L.imageOverlay(imageUrl, imageBounds)


            L.control.sideBySide(olayer, player).addTo(map);
        }






    </script>

    <!--JavaScript at end of body for optimized loading-->
    <!-- for sidebar -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous">
    </script>
    <script src="https://malihu.github.io/custom-scrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="js/sidebar-main.js"></script>


</body>

</html>
